#summary How to start developing with BlackBox.
#labels Featured

= Introduction =
BlackBox is an Android application that provides a moving map for VFR situational awareness for pilots. Flight tracks are recorded and can be exported.

Ant build files are used so you can use any IDE you'd like. See the [http://developer.android.com/guide/developing/other-ide.html Developing in Other IDEs] page for more information.

= Prerequisites =
BlackBox developers will need the following things installed:
  * [http://developer.android.com/sdk/ Android SDK] 2.0 or higher
    * Recommended install location on Linux/Mac is `/usr/local/android`
  * [http://ant.apache.org/ Apache Ant] 1.7.1 or higher
  * [http://java.sun.com/javase/downloads/ Java SDK] 1.5 or higher

You must add the `tools` directory of the Android SDK to your PATH.
= Build =
== Android Code ==
The code that is deployed to the phone is in the `android` directory. 

=== Configure your local build ===
Before you can build for the first time, you need to run this command *once* from the `blackbox` top-level directory.
{{{
android update project -p android
}}}
This will create a file called `android/local.properties` which points to your sdk install location.

=== Normal build ===
Execute these commands to build a debug version of the Android `.apk` file and install it to a running android emulator.
{{{
cd android
ant install
}}}

=== Troublshooting build problems ===
If the build fails with this error: `taskdef class com.android.ant.SetupTask cannot be found` that means you didn't read the instructions above under *Configure your local build*

== Parsing Code ==
This is code that parses the aviation data from public sources, such as the FAA and puts it into a format that BlackBox can use. This code is not deployed to the phone. The parsing code is in the `parsing` directory.

Build it like this:
{{{
cd parsing
ant
}}}

Parse an FAA airport data file named `FAANFD18` like this:
{{{
bin/create-airport-db FAANFD18
}}}

That will create an [http://sqlite.org SQLite] database that can be deployed to the phone. _Need to figure out whether this is installed as part of the `.apk` or is separate_

= Eclipse Setup =
Configure Eclipse to use a 1.6 compiler (the default is 1.5).

You should create 3 projects: BlackBox-android, BlackBox-common and BlackBox parsing. The first one should be an Android project, while the others are just normal Java projects.

 For the` android` code,  you'll need to add `common/lib/google-collect-1.0.jar` and  `common/release/blackbox-common-VERSION.jar` to your Java build path.