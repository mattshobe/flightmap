#summary Overview of the application design.

<wiki:toc max_depth="2" />

= Objective =
Flight Map is a moving map Android application for pilots. It's meant to be a demonstration of what's possible with the Android SDK. Since we want it to work in the air, the application must work in airplane mode.

We use public-domain data from the [http://www.faa.gov FAA].

No user data is collected or sent from the phone to anywhere else.

= Overview =
There are 3 top-level packages to Flight Map: preprocessing, Android, and common.

The preprocessing code takes data from the FAA and produces data that's been parsed and suitable to deliver to the phone. This code is currently manually run to produce the files in the `data` directory. In future, we may be able to support other sources of data (e.g. from other countries).

The Android code is what actually runs on the phone. The main component is a moving map that shows the airports, airspace and other aviation data near the current location. This is very similar to Google Maps, except it's just for aviation data. It's also possible to get details on an airport and search the data on the phone.

The common code is shared by both the preprocessing and Android components.

= Detailed Design =
== Preprocessing Design ==
The preprocessing code generates a [http://sqlite.org SQLite] database that's checked into subversion as `data/aviation.db`.

The !AviationMasterRecordParser reads information about airports from the [http://www.faa.gov/airports/airport_safety/airportdata_5010/ FAA Aviation Master Record], normalizes it and stores it in the aviation.db.

Communications data comes from the [http://nfdc.faa.gov/ National Flight Data Center] (NFDC) in the NASR (National Airspace System Resources) as a set of text files. That data is parsed by the !CommParser class and stored in aviation.db.

Airspace data also comes from the NFDC and is parsed by the !NfdAirspaceParser class. Airspace is described in a vector format and is stored in the aviation.db in a way that makes it easy to query and display.

== Android Design ==
=== Android SDK Level ==
For our first release, we've set the minimum Android SDK version to 7 (Android 2.1 / Eclair). The target SDK is set to version 8 (Android 2.2 / Froyo) solely to allow installation to the SD card for users running Android 2.2 and higher.

We do not currently use any SDK version 8 functionality.

=== Activities ===
There are 4 activities in the application: !MainActivity, !SearchActivity, !TapcardActivity and !UserPrefsActivity. The !MainActivity (surprisingly) is the one that's launched when you start Flight Map. It does all the initial set up, the starts the main event loop to update the moving map.

!SearchActivity is launched when you press the "search" button on your phone. It lets you search for airports by name, identifier or city name.

!TapcardActivity is what displays details about an airport when you tap on the airport symbol on the map. It's also launched when you search for an airport and tap on it. In addition to showing airport details, it displays a small strip of navigation data showing a pointer to the airport from your current position, your distance and estimated time enroute (if moving).

The !UserPrefsActivity handles the UI for changing user preferences.


== Key Common Classes ==